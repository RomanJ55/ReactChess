(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{158:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(2),i=a.n(c),r=a(37),o=a.n(r),s=(a(48),a(4)),m=a(38),u=Object(m.io)("https://chessapi55.herokuapp.com/game"),l=(a(79),a(39)),b=a(40),j=a(42),d=a(41),O=a.p+"static/media/chess.5b7e3715.png",p=function(e){Object(j.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("header",{className:"center",children:[Object(n.jsx)("img",{src:O,alt:""}),Object(n.jsx)("h1",{children:"Chess Game by RomJ55"})]})}}]),a}(i.a.Component),f=a(5),g=a(3),h=function(e){var t=e.position,a=e.timeoutHandler,i=e.run,r=Object(c.useState)(JSON.parse(localStorage.getItem("top"===t?"b_time":"w_time"))),o=Object(s.a)(r,2),m=o[0],u=o[1],l=Object(c.useState)(i),b=Object(s.a)(l,2),j=b[0],d=b[1];Object(c.useEffect)((function(){d(i);var e=null;return j?e=setInterval((function(){var e=JSON.parse(localStorage.getItem("top"===t?"b_time":"w_time"));u(e-1)}),1e3):j||0===m||clearInterval(e),function(){return clearInterval(e)}}),[j,m,i,t]),Object(c.useEffect)((function(){localStorage.setItem("top"===t?"b_time":"w_time",JSON.stringify(m))}),[t,m]);var O=g.a.create({slide:{animationName:f.zoomInRight,animationDuration:"2.6s"}});if(m>=0){var p=Math.floor(m/60),h=m%60;return h>9?Object(n.jsxs)("h3",{className:Object(g.b)(O.slide),children:["Time: ",p,":",h]}):Object(n.jsxs)("h3",{className:Object(g.b)(O.slide),children:["Time: ",p,":0",h]})}return a(),Object(n.jsx)("h3",{children:"Time: Times up!"})},v=function(e){var t=e.j,a=e.i,c=e.imagePath,i=e.type,r=e.selected,o=e.player,s=e.updateData,m=g.a.create({zoom:{animationName:f.zoomIn,animationDuration:"3s"},zoomImg:{animationName:f.zoomInDown,animationDuration:"2.5s"},selectedAnimation:{animationName:f.rubberBand,animationDuration:"1.1s"}});return Object(n.jsx)("button",{className:[Object(g.b)(m.zoom),"square"].join(" "),style:{background:(t+a)%2?"black":"white",border:r?"4px solid rgb(255,255,0)":"2px solid rgb(136, 127, 127)"},onClick:function(){u.emit("clicked",{x:a,y:t,player:o}),u.on("clicked",(function(e){"Done!"===e&&(u.off("clicked"),s())}))},children:Object(n.jsx)("img",{className:Object(g.b)(m.zoomImg),src:"/ReactChess"+c,alt:i})})},x=function(e){var t=e.squares,a=e.rows,i=e.columns,r=e.updateData,o=Object(c.useState)([]),m=Object(s.a)(o,2),u=m[0],l=m[1];Object(c.useEffect)((function(){l(t)}),[t]);for(var b=[],j=0;j<a;j++)for(var d=0;d<i;d++){var O=[j,d],p=-1,f="/pieces/dummy.png",g=-1,h=void 0,x=void 0;void 0!==u&&u.length>1&&u[j][d]&&(p=u[j][d].type,x=u[j][d].selected,f="/pieces/"+(g="white"===(h=u[j][d].player)?0:1)+"0"+p+".png",5===p&&u[j][d].incheck&&(f="/pieces/"+g+"0"+p+"c.png")),b.push(Object(n.jsx)(v,{j:d,i:j,imagePath:f,type:p,selected:x,player:h,updateData:r},O))}return Object(n.jsx)("div",{className:"board",children:b})},N=function(e){var t=e.turn,a=g.a.create({bounce:{animationName:f.zoomInUp,animationDuration:"2.7s"}}),c="".concat(t," Turn");return Object(n.jsx)("h2",{className:Object(g.b)(a.bounce),children:c.toUpperCase()})},S=function(e){var t=e.turn,a=e.position,c=e.giveUpHandler,i=e.run;return Object(n.jsxs)("div",{className:"footer",children:[Object(n.jsx)("button",{className:"gu-button",onClick:c,children:"Give up"}),Object(n.jsx)(N,{turn:t}),Object(n.jsx)(h,{position:a,timeoutHandler:c,run:i})]})},w=a.p+"static/media/w_won.e09776c3.png",y=a.p+"static/media/b_won.b15e077a.png",I=function(e){var t=e.winner,a=e.startGameHandler,c="Winner: "+t,i=g.a.create({bounce:{animationName:f.bounceIn,animationDuration:"0.8s"}});return Object(n.jsxs)("div",{className:[Object(g.b)(i.bounce),"start"].join(" "),children:[Object(n.jsx)("h1",{className:"center",style:{fontSize:50},children:c.toUpperCase()}),Object(n.jsx)("img",{src:"white"===t?w:y,alt:"",style:{width:320,padding:3}}),Object(n.jsx)("button",{className:"se-button",onClick:a,children:"Play again"})]})},_=a.p+"static/media/start_game.553f5179.jpg",D=function(e){var t=e.startGameHandler,a=g.a.create({bounce:{animationName:f.bounceIn,animationDuration:"0.8s"}});return Object(n.jsxs)("div",{className:[Object(g.b)(a.bounce),"start"].join(" "),children:[Object(n.jsx)("img",{src:_,style:{width:700},alt:""}),Object(n.jsx)("button",{className:"se-button",onClick:t,children:"Start game"})]})},k=function(e){var t=e.items,a=e.updateData,i=Object(c.useState)([[]]),r=Object(s.a)(i,2),o=r[0],m=r[1],l=Object(c.useState)([]),b=Object(s.a)(l,2),j=b[0],d=b[1],O=Object(c.useState)([]),p=Object(s.a)(O,2),f=p[0],g=p[1],v=Object(c.useState)([]),N=Object(s.a)(v,2),w=N[0],y=N[1];Object(c.useEffect)((function(){m(t.board),d(t.turn),g(t.game_running),y(t.is_winner)}),[t.board,t.turn,t.game_running,t.is_winner]),null===localStorage.getItem("b_time")&&localStorage.setItem("b_time",JSON.stringify(t.timer)),null===localStorage.getItem("w_time")&&localStorage.setItem("w_time",JSON.stringify(t.timer+2));var _=function(){u.emit("gameEnd"),u.on("gameEnd",(function(e){"game ended!"===e&&(u.off("gameEnd"),a())}))},k=function(){var e,t,n=(e=1,t=999,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e),c={username:"RomJ",room:"abc".concat(n)};u.emit("join",c),u.emit("gameStart"),u.on("gameStart",(function(e){"game started!"===e&&(u.off("gameStart"),a())})),localStorage.removeItem("b_time"),localStorage.removeItem("w_time")};return Object(n.jsx)(n.Fragment,{children:f?Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)("div",{className:"top-timer",children:Object(n.jsx)(h,{position:"top",timeoutHandler:_,run:"white"!==j})}),Object(n.jsx)(x,{squares:o,rows:t.rows,columns:t.columns,updateData:a}),Object(n.jsx)(S,{turn:j,position:"bottom",run:"white"===j,giveUpHandler:_})]}):w?Object(n.jsx)(I,{winner:t.winner,startGameHandler:k}):Object(n.jsx)(D,{startGameHandler:k})})};var z=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),a=t[0],i=t[1],r=Object(c.useState)(!0),o=Object(s.a)(r,2),m=o[0],l=o[1],b=function(){u.emit("data"),u.on("data",(function(e){var t=JSON.parse(e);i(t),l(!1)}))};return Object(c.useEffect)((function(){return b(),function(){u.off("data")}}),[]),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(p,{}),m?Object(n.jsx)("h3",{className:"center",style:{marginTop:200,fontSize:40},children:"Loading....."}):Object(n.jsx)(k,{items:a,updateData:b})]})};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(z,{})}),document.getElementById("root"))},48:function(e,t,a){},79:function(e,t,a){}},[[158,1,2]]]);
//# sourceMappingURL=main.3548a9d0.chunk.js.map